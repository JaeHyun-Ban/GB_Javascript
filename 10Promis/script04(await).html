<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
  </head>

  <body>

    <script>
      /*
      async와 짝꿍인 await
      규칙: async함수 안에서만 사용 가능하다
       */
      function myfetch1() {
        return new Promise(function (success, fail) {
          //5초뒤 실행
          setTimeout(function () {
            success("첫번째 비동기 함수의 성공");
          }, 5000);

        })
      }

      function myfetch2() {
        return new Promise(function (success, fail) {
          //1초뒤 실행
          setTimeout(function () {
            success("두번째 비동기 함수의 성공");
          }, 1000);

        })
      }

      function myfetch3() {
        return new Promise(function (success, fail) {
          //3초뒤 실행
          setTimeout(function () {
            success("세번째 비동기 함수의 성공");
          }, 3000);

        })
      }


      //1번 실행 후 2번 > 3번을 순서대로 실행시키려면?
      // function test() {
      //   myfetch1().then(function (response) {
      //     //이곳은 myfetch1의 응답이 돌아왔을때(성공) 실행됨
      //     console.log(response);
      //     myfetch2().then(function (response2) {
      //       console.log(response2);
      //       myfetch3().then(function (response3) {
      //         console.log(response3);
      //       })
      //     })
      //   })
      // }

      //위에 연쇄적으로 실행되는 비동기 함수를 await쓰게 되면 해당 함수가 끝날때 까지 기다리게 되고,
      //조금더 깔끔한 형태로 비동기 콜을 사용할 수 있습니다.
      async function test() {
        var data1 = await myfetch1();//myfetch1이 호출 후 반환할 때까지 기다려라
        console.log(data1);
        var data2 = await myfetch2();
        console.log(data2);
        var data3 = await myfetch3();
        console.log(data3);
      }



      (function () {
        test();
      })();


    </script>
  </body>

</html>